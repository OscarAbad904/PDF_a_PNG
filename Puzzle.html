<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¬°A Parejas con el Cuerpo Humano!</title>
  <style>
    body {
      background: url('cuerpo-humano-puzzle.png') no-repeat center center fixed;
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: 'Comic Sans MS', cursive;
      color: #333;
      margin: 0;
      padding-bottom: 60px;
    }
    header, footer {
      background-color: rgba(0,0,0,0.7);
      color: #FFD700;
      text-align: center;
      padding: 1rem;
    }
    main {
      width: 90%;
      max-width: 800px;
      margin: 1rem auto;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 1.5rem;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    @media (min-width: 700px) {
      main {
        flex-direction: row;
        align-items: flex-start;
        justify-content: space-around;
      }
    }
    h1 {
      margin: 0 0 1rem 0;
      font-size: 2.5rem;
      text-shadow: 2px 2px 3px rgba(0,0,0,0.3);
      text-align: center;
    }
    p {
      font-size: 1.2rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    .column {
      width: 45%;
      padding: 1rem;
      box-sizing: border-box;
    }
    .column h2 {
      font-size: 1.8rem;
      margin-top: 0;
      color: #2E7D32;
      text-align: center;
    }
    .item {
      background: #FFF3E0;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 0.5rem;
      border: 2px solid #FFB74D;
      font-size: 1.1rem;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s;
    }
    .item:hover {
      background-color: #FFE0B2;
    }
    .item.selected {
      border-color: #4CAF50;
      background-color: #E8F5E9;
    }
    .item.matched {
      background-color: #C8E6C9;
      border-color: #388E3C;
      opacity: 0.7;
      text-decoration: line-through;
      cursor: default;
      pointer-events: none;
    }
    .item.incorrect-match {
      background-color: #FFCDD2;
      border-color: #F44336;
    }
    button {
      margin-top: 2rem;
      background-color: #A1887F;
      color: white;
      padding: 1.2rem 2.5rem;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1.4rem;
      transition: transform 0.3s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      display: block; /* Make button full width on mobile */
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    button:hover {
      transform: scale(1.08);
      background-color: #795548;
    }
    #result {
      margin-top: 2.5rem;
      font-size: 1.5rem;
      color: #0277BD;
      text-align: center;
      width: 100%; /* Make result text full width on mobile */
    }
    footer {
      bottom: 0;
      width: 100%;
      padding: 1rem 0;
      z-index: 100;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>¬°A Parejas con el Cuerpo Humano! üß©</h1>
  </header>

  <main>
    <p>
      ¬°Hola Paula! Haz clic en una parte del cuerpo y luego en su funci√≥n correcta para unirlas.
      ¬°Intenta hacer todas las parejas! ¬°T√∫ puedes! ‚ú®
    </p>

    <div class="column parts-column">
      <h2>Partes del Cuerpo</h2>
      <div class="item part-item" data-part="Cerebro">Cerebro</div>
      <div class="item part-item" data-part="Piel">Piel</div>
      <div class="item part-item" data-part="M√∫sculos">M√∫sculos</div>
      <div class="item part-item" data-part="Coraz√≥n">Coraz√≥n</div>
      <div class="item part-item" data-part="Pulmones">Pulmones</div>
    </div>

    <div class="column functions-column" id="functionsColumn">
      <h2>Funciones</h2>
      <div class="item function-item" data-function="Piensa y controla tu cuerpo">Piensa y controla tu cuerpo</div>
      <div class="item function-item" data-function="Te protege por fuera">Te protege por fuera</div>
      <div class="item function-item" data-function="Te ayuda a moverte">Te ayuda a moverte</div>
      <div class="item function-item" data-function="Bombea la sangre">Bombea la sangre</div>
      <div class="item function-item" data-function="Te ayudan a respirar">Te ayudan a respirar</div>
    </div>

    <button onclick="resetGame()">Reiniciar Juego</button>
    <div id="result"></div>
  </main>

  <footer>
    <p>¬°Sigue explorando tu cuerpo! ‚ù§Ô∏èüß†</p>
  </footer>

  <script>
    const correctMatches = {
      "Cerebro": "Piensa y controla tu cuerpo",
      "Piel": "Te protege por fuera",
      "M√∫sculos": "Te ayuda a moverte",
      "Coraz√≥n": "Bombea la sangre",
      "Pulmones": "Te ayudan a respirar"
    };

    let selectedPartItem = null;
    let correctPairsCount = 0;
    const totalPairs = Object.keys(correctMatches).length;

    const partItems = document.querySelectorAll('.part-item');
    const functionItems = Array.from(document.querySelectorAll('.function-item'));
    const functionsColumn = document.getElementById('functionsColumn');

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    window.addEventListener('load', () => {
      shuffleArray(functionItems);
      functionItems.forEach(item => functionsColumn.appendChild(item));
    });


    partItems.forEach(item => {
      item.addEventListener('click', handlePartClick);
    });

    functionItems.forEach(item => {
      item.addEventListener('click', handleFunctionClick);
    });

    function handlePartClick(event) {
      resetItemSelection(partItems);
      if (!event.target.classList.contains('matched')) {
        selectedPartItem = event.target;
        selectedPartItem.classList.add('selected');
        removeIncorrectMatchClass();
        updateResult("");
      } else {
        selectedPartItem = null;
      }
    }

    function handleFunctionClick(event) {
      if (selectedPartItem) {
        if (!event.target.classList.contains('matched')) {
          const selectedFunctionItem = event.target;
          const part = selectedPartItem.dataset.part;
          const functionText = selectedFunctionItem.dataset.function;

          if (correctMatches[part] === functionText) {
            markCorrectMatch(selectedPartItem, selectedFunctionItem);
            correctPairsCount++;
            updateResult(`¬°Bien hecho! üéâ ¬°${part} y ${functionText} van juntos!`);
            if (correctPairsCount === totalPairs) {
              updateResult(`¬°Felicidades Paula! üéâ ¬°Has encontrado todas las parejas! ¬°Eres una experta en el cuerpo humano! üòä`);
            }
          } else {
            markIncorrectMatch(selectedFunctionItem);
            updateResult(`¬°Int√©ntalo de nuevo! üòî ¬°${functionText} no es la funci√≥n de ${part}!`);
            setTimeout(() => {
              removeIncorrectMatchClass();
              resetItemSelection(partItems);
              selectedPartItem = null;
              updateResult("");
            }, 1500);
          }
          selectedPartItem.classList.remove('selected');
          selectedPartItem = null;
        }
      } else {
        updateResult("Primero selecciona una parte del cuerpo.");
      }
    }

    function markCorrectMatch(partItem, functionItem) {
      partItem.classList.add('matched');
      functionItem.classList.add('matched');
    }

    function markIncorrectMatch(functionItem) {
      functionItem.classList.add('incorrect-match');
    }

    function removeIncorrectMatchClass() {
      functionItems.forEach(item => item.classList.remove('incorrect-match'));
    }

    function resetItemSelection(items) {
      items.forEach(item => item.classList.remove('selected'));
    }

    function updateResult(message) {
      document.getElementById('result').innerText = message;
    }

    function resetGame() {
      partItems.forEach(item => {
        item.classList.remove('matched', 'selected');
        item.classList.remove('incorrect-match');
        item.style.opacity = 1;
        item.style.textDecoration = 'none';
        item.style.pointerEvents = 'auto';
      });
      functionItems.forEach(item => {
        item.classList.remove('matched', 'incorrect-match');
        item.style.opacity = 1;
        item.style.textDecoration = 'none';
        item.style.pointerEvents = 'auto';
      });
      shuffleArray(functionItems);
      functionsColumn.innerHTML = '<h2>Funciones</h2>';
      functionItems.forEach(item => functionsColumn.appendChild(item));

      selectedPartItem = null;
      correctPairsCount = 0;
      updateResult("");
    }
  </script>
</body>
</html>